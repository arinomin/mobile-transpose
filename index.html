<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mobile-transpose</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>mobile-transpose</h1>

        <div class="global-controls">
            <div class="control-group">
                <label>Base Note</label>
                <button id="base-note-display-button" class="display-button">C4</button>
            </div>
            <div class="control-group">
                <label>BPM / Rate</label>
                <button id="bpm-rate-display-button" class="display-button">120 / 16分</button>
            </div>
        </div>

        <div id="sequencer-grid" class="sequencer-grid"></div>

        <div class="seq-max-controls">
            <label>SEQ MAX</label>
            <div id="seq-max-buttons" class="seq-max-buttons"></div>
        </div>

        <!-- Desktop-only action buttons -->
        <div class="desktop-actions">
            <button id="play-stop-button-desktop" class="play-stop-button">
                <svg class="icon-play" viewBox="0 0 24 24" width="24" height="24"><path d="M8 5v14l11-7z"/></svg>
                <svg class="icon-stop" viewBox="0 0 24 24" width="24" height="24"><path d="M6 6h12v12H6z"/></svg>
            </button>
            <button id="melody-gen-button-desktop">Generate Melody</button>
            <button id="share-button-desktop">Share</button>
        </div>

    </div>

    <!-- Mobile-only footer menu -->
    <footer class="footer-menu">
        <button id="melody-gen-button-mobile" class="footer-button-gen">Generate</button>
        <button id="play-stop-button-mobile" class="play-stop-button footer-button-play">
            <svg class="icon-play" viewBox="0 0 24 24" width="24" height="24"><path d="M8 5v14l11-7z"/></svg>
            <svg class="icon-stop" viewBox="0 0 24 24" width="24" height="24"><path d="M6 6h12v12H6z"/></svg>
        </button>
        <button id="share-button-mobile" class="footer-button-share">Share</button>
    </footer>

    <div id="step-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Step <span id="modal-step-number"></span></h2>
                <button id="close-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="transpose-info">
                    <div id="transpose-value-display" class="info-box"></div>
                    <div id="interval-name-display" class="info-box"></div>
                    <div id="final-note-display" class="info-box"></div>
                </div>
                <div id="transpose-selector" class="transpose-selector">
                    <div class="selector-track"></div>
                    <div class="selector-ticks"></div>
                    <div class="selector-handle"></div>
                </div>
                <div class="transpose-labels">
                    <span>-12</span>
                    <span>0</span>
                    <span>+12</span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="audition-button">Audition</button>
                <button id="reset-button">Reset</button>
                <button id="done-step-button">Done</button>
            </div>
        </div>
    </div>

    <div id="bpm-rate-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit BPM & Rate</h2>
                <button id="close-bpm-rate-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="bpm-editor">
                    <h3>BPM</h3>
                    <div class="bpm-adjust-controls">
                        <button id="bpm-down-10">-10</button>
                        <button id="bpm-down-1">-1</button>
                        <span id="modal-bpm-value">120</span>
                        <button id="bpm-up-1">+1</button>
                        <button id="bpm-up-10">+10</button>
                    </div>
                </div>
                <div class="rate-editor">
                    <h3>Rate</h3>
                    <div id="modal-rate-buttons" class="rate-buttons">
                        <button data-rate="4">16分</button>
                        <button data-rate="3">1拍3連</button>
                        <button data-rate="2">8分</button>
                        <button data-rate="1.5">2拍3連</option>
                        <button data-rate="1">4分</button>
                        <button data-rate="0.5">2分</button>
                        <button data-rate="0.25">全音符</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="done-bpm-rate-button">Done</button>
            </div>
        </div>
    </div>

    <div id="base-note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Base Note</h2>
                <button id="close-base-note-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="note-name-editor">
                    <h3>Note</h3>
                    <div id="modal-note-name-buttons" class="note-name-buttons">
                        <!-- Note name buttons will be generated by JS -->
                    </div>
                </div>
                <div class="octave-editor">
                    <h3>Octave</h3>
                    <div id="modal-octave-buttons" class="octave-buttons">
                        <!-- Octave buttons will be generated by JS -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="done-base-note-button">Done</button>
            </div>
        </div>
    </div>

    <div id="melody-gen-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Melody Generator</h2>
                <button id="close-melody-gen-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="melody-gen-control">
                    <label for="melody-key-select">Key</label>
                    <select id="melody-key-select">
                        <option value="C">C</option>
                        <option value="C#">C#</option>
                        <option value="D">D</option>
                        <option value="D#">D#</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#</option>
                        <option value="G">G</option>
                        <option value="G#">G#</option>
                        <option value="A">A</option>
                        <option value="A#">A#</option>
                        <option value="B">B</option>
                    </select>
                </div>
                <div class="melody-gen-control">
                    <label for="melody-scale-select">Scale</label>
                    <select id="melody-scale-select">
                        <option value="major">Major</option>
                        <option value="minor">Natural Minor</option>
                        <option value="majorPentatonic">Major Pentatonic</option>
                        <option value="minorPentatonic">Minor Pentatonic</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="preview-melody-button">Generate & Preview</button>
                <button id="apply-melody-button" disabled>Apply</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>