<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mobile-transpose</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="container">
        <h1>mobile-transpose</h1>

        <div class="global-controls">
            <div class="control-group">
                <label>Base Note</label>
                <button id="base-note-display-button" class="display-button">C4</button>
            </div>
            <div class="control-group">
                <label>BPM / Rate</label>
                <button id="bpm-rate-display-button" class="display-button">120 / 16分</button>
            </div>
        </div>

        <div id="sequencer-grid" class="sequencer-grid"></div>

        <div class="seq-max-controls">
            <label>SEQ MAX</label>
            <div id="seq-max-buttons" class="seq-max-buttons"></div>
        </div>

    </div>

    <footer class="footer-menu">
        <button id="melody-gen-button" class="footer-button" aria-label="Generate Melody">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12.5,2.5l2.5,5l5,2.5l-5,2.5l-2.5,5l-2.5-5l-5-2.5l5-2.5L12.5,2.5z M5,15l1.5,3l3,1.5l-3,1.5l-1.5,3l-1.5-3l-3-1.5l3-1.5L5,15z"/></svg>
        </button>
        <button id="play-stop-button" class="play-stop-button">
            <div class="play-content">
                <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                <span>Play</span>
            </div>
            <div class="stop-content">
                <svg class="icon-stop" viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
                <span>Stop</span>
            </div>
        </button>
        <button id="share-button" class="footer-button" aria-label="Share">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.18c.52.47 1.2.77 1.96.77c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.66 1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3z"/></svg>
        </button>
    </footer>

    <div id="step-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Step <span id="modal-step-number"></span></h2>
                <button id="close-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="transpose-info">
                    <div id="transpose-value-display" class="info-box"></div>
                    <div id="interval-name-display" class="info-box"></div>
                    <div id="final-note-display" class="info-box"></div>
                </div>
                <div id="transpose-selector" class="transpose-selector">
                    <div class="selector-track"></div>
                    <div class="selector-ticks"></div>
                    <div class="selector-handle"></div>
                </div>
                <div class="transpose-labels">
                    <span>-12</span>
                    <span>0</span>
                    <span>+12</span>
                </div>
                <div class="step-enable-control">
                    <label for="step-enable-toggle">Play Step</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="step-enable-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button id="audition-button">Audition</button>
                <button id="reset-button">Reset</button>
                <button id="done-step-button">Done</button>
            </div>
        </div>
    </div>

    <div id="bpm-rate-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit BPM & Rate</h2>
                <button id="close-bpm-rate-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="bpm-editor">
                    <h3>BPM</h3>
                    <div class="bpm-adjust-controls">
                        <button id="bpm-down-10">-10</button>
                        <button id="bpm-down-1">-1</button>
                        <span id="modal-bpm-value">120</span>
                        <button id="bpm-up-1">+1</button>
                        <button id="bpm-up-10">+10</button>
                    </div>
                </div>
                <div class="rate-editor">
                    <h3>Rate</h3>
                    <div id="modal-rate-buttons" class="rate-buttons">
                        <button data-rate="4">16分</button>
                        <button data-rate="3">1拍3連</button>
                        <button data-rate="2">8分</button>
                        <button data-rate="1.5">2拍3連</option>
                        <button data-rate="1">4分</button>
                        <button data-rate="0.5">2分</button>
                        <button data-rate="0.25">全音符</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="done-bpm-rate-button">Done</button>
            </div>
        </div>
    </div>

    <div id="base-note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Base Note</h2>
                <button id="close-base-note-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="note-name-editor">
                    <h3>Note</h3>
                    <div id="modal-note-name-buttons" class="note-name-buttons">
                        <!-- Note name buttons will be generated by JS -->
                    </div>
                </div>
                <div class="octave-editor">
                    <h3>Octave</h3>
                    <div id="modal-octave-buttons" class="octave-buttons">
                        <!-- Octave buttons will be generated by JS -->
                    </div>
                </div>
                <div class="waveform-editor">
                    <h3>Waveform</h3>
                    <div id="modal-waveform-buttons" class="waveform-buttons">
                        <!-- Waveform buttons will be generated by JS -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="done-base-note-button">Done</button>
            </div>
        </div>
    </div>

    <div id="melody-gen-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Melody Generator</h2>
                <button id="close-melody-gen-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="melody-gen-control">
                    <label for="melody-key-select">Key</label>
                    <select id="melody-key-select">
                        <option value="C">C</option>
                        <option value="C#">C#</option>
                        <option value="D">D</option>
                        <option value="D#">D#</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#</option>
                        <option value="G">G</option>
                        <option value="G#">G#</option>
                        <option value="A">A</option>
                        <option value="A#">A#</option>
                        <option value="B">B</option>
                    </select>
                </div>
                <div class="melody-gen-control">
                    <label for="melody-scale-select">Scale</label>
                    <select id="melody-scale-select">
                        <option value="major">Major</option>
                        <option value="minor">Natural Minor</option>
                        <option value="majorPentatonic">Major Pentatonic</option>
                        <option value="minorPentatonic">Minor Pentatonic</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="preview-melody-button">Generate & Preview</button>
                <button id="apply-melody-button" disabled>Apply</button>
            </div>
        </div>
    </div>

    <div id="share-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>共有</h2>
                <button id="close-share-modal-button" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <p>シーケンサーを共有しましょう。</p>
                <input type="text" id="share-url-input" readonly class="share-url-display">
                <div class="share-buttons-container">
                    <button id="copy-url-button" class="action-button">URLをコピー</button>
                    <button id="share-x-button" class="action-button">Xで共有</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>